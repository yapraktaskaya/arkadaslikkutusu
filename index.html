<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Arkada≈ülƒ±k Kutusu">
    <title>√ñzel Arkada≈ülƒ±k Kutusu üíù</title>
    <link rel="apple-touch-icon" href="resources/images/emoji.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fafafa;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        #app {
            width: 450px;
            height: 800px;
            background: #fafafa;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.1);
        }

        .screen {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .screen.active {
            opacity: 1;
            pointer-events: all;
        }

        /* ANA Gƒ∞Rƒ∞≈û EKRANI */
        #mainLogin {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #mainLogin h1 {
            font-size: 28px;
            color: #666;
            margin-bottom: 10px;
            text-align: center;
            padding: 0 20px;
        }

        #mainLogin .warning {
            font-size: 15px;
            color: #ff0000;
            margin-bottom: 60px;
        }

        #mainLogin input {
            width: 300px;
            height: 50px;
            background: #d3d3d3;
            border: none;
            padding: 0 15px;
            font-size: 30px;
            color: #00008b;
            text-align: center;
            letter-spacing: 8px;
        }

        /* ARKADA≈û SE√áƒ∞Mƒ∞ EKRANI */
        #friendSelection h1 {
            text-align: center;
            padding: 50px 0 30px;
            font-size: 32px;
            color: #666;
        }

        .friend-button {
            width: 350px;
            height: 75px;
            margin: 10px auto;
            border-radius: 15px;
            background: white;
            border: 2px solid #d3d3d3;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 24px;
            color: #666;
        }

        .friend-button:hover {
            transform: scale(1.02);
        }

        .friend-button:active {
            transform: scale(0.98);
        }

        /* ≈ûƒ∞FRE EKRANI */
        .password-screen .header {
            height: 150px;
            display: flex;
            align-items: center;
            padding: 0 40px;
            color: white;
            font-size: 35px;
        }

        .password-screen .hint-section {
            padding: 30px 40px;
        }

        .password-screen .hint-section h3 {
            color: #666;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .password-screen .hint-section p {
            color: #666;
            font-size: 22px;
            line-height: 1.4;
        }

        .password-screen .warning {
            text-align: center;
            color: #ff0000;
            font-size: 15px;
            margin: 30px 0 20px;
        }

        .password-screen input {
            width: 300px;
            height: 50px;
            background: #d3d3d3;
            border: none;
            padding: 0 15px;
            font-size: 25px;
            color: #000;
            display: block;
            margin: 0 auto;
        }

        .password-screen input.small-text {
            font-size: 18px;
        }

        .password-screen .emoji-container {
            text-align: center;
            margin-top: 50px;
        }

        .password-screen .emoji-container img {
            width: 128px;
            height: 128px;
        }

        .back-button {
            width: 150px;
            height: 40px;
            background: #d3d3d3;
            border: none;
            border-radius: 20px;
            margin: 0 auto;
            display: block;
            position: absolute;
            bottom: 50px;
            left: 150px;
            cursor: pointer;
            color: white;
            font-size: 20px;
        }

        /* MESAJ EKRANI */
        .message-screen .header {
            height: 120px;
            display: flex;
            align-items: center;
            padding: 0 40px;
            color: white;
            font-size: 45px;
        }

        .message-screen .photo-container {
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 10px 0;
        }

        .message-screen .photo-container img {
            max-width: 380px;
            max-height: 320px;
            object-fit: contain;
        }

        .message-screen .message-text {
            padding: 20px 40px;
            color: #666;
            font-size: 22px;
            line-height: 1.5;
        }

        .message-screen .back-button {
            width: 200px;
            height: 50px;
            background: #d3d3d3;
            bottom: 40px;
            left: 125px;
            font-size: 20px;
            border-radius: 25px;
        }

        /* KONFETƒ∞ */
        .confetti {
            position: absolute;
            font-size: 25px;
            pointer-events: none;
            z-index: 1000;
        }

        /* HOVER EFFECTS */
        .friend-button[data-color="pink"]:hover {
            background: #FFC0CB;
            border-color: #FFC0CB;
            color: white;
        }

        .friend-button[data-color="purple"]:hover {
            background: #800080;
            border-color: #800080;
            color: white;
        }

        .friend-button[data-color="skyblue"]:hover {
            background: #87CEEB;
            border-color: #87CEEB;
            color: white;
        }

        .friend-button[data-color="lime"]:hover {
            background: #00FF00;
            border-color: #00FF00;
            color: white;
        }

        .friend-button[data-color="orange"]:hover {
            background: #FFA500;
            border-color: #FFA500;
            color: white;
        }

        .friend-button[data-color="red"]:hover {
            background: #FF0000;
            border-color: #FF0000;
            color: white;
        }

        @media (max-width: 480px) {
            #app {
                width: 100vw;
                height: 100vh;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- ANA Gƒ∞Rƒ∞≈û EKRANI -->
        <div id="mainLogin" class="screen active">
            <h1>√ñzel Arkada≈ülƒ±k Kutusu</h1>
            <p class="warning">(T√ºrk√ße karakter kullanmayƒ±n)</p>
            <input type="password" id="mainPasswordInput" maxlength="15" autocomplete="off">
        </div>

        <!-- ARKADA≈û SE√áƒ∞Mƒ∞ EKRANI -->
        <div id="friendSelection" class="screen">
            <h1>Kimin Kutusu?</h1>
            <div id="friendButtons"></div>
        </div>

        <!-- ≈ûƒ∞FRE EKRANLARI (dinamik olarak olu≈üturulacak) -->
        <div id="passwordScreens"></div>

        <!-- MESAJ EKRANLARI (dinamik olarak olu≈üturulacak) -->
        <div id="messageScreens"></div>
    </div>

    <script>
        const friends = [
            {
                name: 'Ceren',
                message: "Lise yƒ±llarƒ±mƒ±n en g√ºzel hediyesi, canƒ±m sƒ±ra arkada≈üƒ±m... Sƒ±ralarƒ±¬≠mƒ±z ayrƒ±lmƒ±≈ü olsa da kalplerimiz hep yan yana. Birlikte b√ºy√ºd√ºk, birlikte hayaller kurduk. Sen benim en kƒ±ymetli ge√ßmi≈üim ve en g√ºzel geleceƒüimsin.",
                photo: 'resources/images/ceren.jpeg',
                music: 'resources/audio/ceren.mp3',
                password: 'su',
                hint: 'Lisede masada g√∂rd√ºƒü√ºn an bitirdiƒüin ≈üey',
                color: '#FFC0CB',
                colorName: 'pink',
                startTime: 0.0
            },
            {
                name: 'Didem',
                message: "Canƒ±m ablam... Hayatƒ±mdaki en g√ºvenli liman, her d√º≈üt√ºƒü√ºmde elimi tutan ilk ki≈üi sensin. Senin varlƒ±ƒüƒ±n bana her zaman g√º√ß ve huzur veriyor. Sen benim bu hayattaki en b√ºy√ºk ≈üansƒ±msƒ±n, iyi ki benim ablamsƒ±n.",
                photo: 'resources/images/didem.jpeg',
                music: 'resources/audio/didem.mp3',
                password: 'goc',
                hint: 'Immigration',
                color: '#800080',
                colorName: 'purple',
                startTime: 114.0
            },
            {
                name: 'Esma',
                message: "Bitanem benim... Sen benim bu hayatta ba≈üƒ±ma gelen en g√ºzel ≈üeylerden birisin. D√ºnya √ºzerime yƒ±kƒ±ldƒ±ƒüƒ±nda bile orada olduƒüunu bilmek benim en b√ºy√ºk huzurum. Kalbinin g√ºzelliƒüi, samimiyetin... ƒ∞yi ki varsƒ±n, yollarƒ±mƒ±z hi√ß ayrƒ±lmasƒ±n.",
                photo: 'resources/images/esma.jpeg',
                music: 'resources/audio/esma.mp3',
                password: 'sikmim',
                hint: 'Alttaki emojinin anlamƒ± ne?',
                color: '#87CEEB',
                colorName: 'skyblue',
                startTime: 89.0,
                hasEmoji: true
            },
            {
                name: 'Merve',
                message: "G√ºzeller g√ºzeli kuzenƒ∞m! Seninle b√ºy√ºmek, her ne≈üemi ve derdimi seninle payla≈ümak harika bir duygu. Kuzenden √∂te, en tatlƒ± dert ortaƒüƒ±msƒ±n. G√ºl√ºc√ºklerimiz hi√ß eksik olmasƒ±n.",
                photo: 'resources/images/merve.jpeg',
                music: 'resources/audio/merve.mp3',
                password: 'sakiz',
                hint: 'Beyaz atlƒ± prensesinin adƒ±',
                color: '#00FF00',
                colorName: 'lime',
                startTime: 14.0
            },
            {
                name: 'Nisa',
                message: "Yol arkada≈üƒ±m, sƒ±rda≈üƒ±m, en yakƒ±nƒ±m... Kelimelerin yetmediƒüi anlarda sadece bakƒ±≈üarak anla≈ütƒ±ƒüƒ±m o √∂zel insan. Hayatƒ±n her anƒ±nda, ne olursa olsun hep yanƒ±mda olduƒüunu bilmek bana g√º√ß veriyor.",
                photo: 'resources/images/nisa.jpeg',
                music: 'resources/audio/nisa.mp3',
                password: 'her sey bu kadar basit',
                hint: 'ƒ∞ki ki≈üilik grubun adƒ±',
                color: '#FFA500',
                colorName: 'orange',
                startTime: 31.0
            },
            {
                name: 'Sena',
                message: "Ruhuma iyi gelen dostum... Seninle vakit ge√ßirmek, d√ºnyayƒ± bir anlƒ±ƒüƒ±na sessize alƒ±p sadece huzuru hissetmek gibi. En samimi anƒ±larƒ±mƒ±n ba≈ürol√ºndesin. ƒ∞yi ki yollarƒ±mƒ±z kesi≈ümi≈ü.",
                photo: 'resources/images/sena.jpeg',
                music: 'resources/audio/sena.mp3',
                password: 'kismetse olur',
                hint: 'Bu aralar en √ßok izlediƒüin ≈üey',
                color: '#FF0000',
                colorName: 'red',
                startTime: 59.0
            }
        ];

        let currentScreen = 'mainLogin';
        let currentFriend = null;
        let currentAudio = null;
        let confettiParticles = [];

        // ANA Gƒ∞Rƒ∞≈û
        const mainPasswordInput = document.getElementById('mainPasswordInput');
        mainPasswordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (mainPasswordInput.value === '1234') {
                    showScreen('friendSelection');
                    mainPasswordInput.value = '';
                }
            }
        });

        // ARKADA≈û BUTONLARINI OLU≈ûTUR
        const friendButtonsContainer = document.getElementById('friendButtons');
        friends.forEach((friend, index) => {
            const button = document.createElement('div');
            button.className = 'friend-button';
            button.setAttribute('data-color', friend.colorName);
            button.textContent = friend.name;
            button.addEventListener('click', () => {
                currentFriend = index;
                showScreen(`password-${index}`);
            });
            friendButtonsContainer.appendChild(button);
        });

        // ≈ûƒ∞FRE VE MESAJ EKRANLARINI OLU≈ûTUR
        const passwordScreensContainer = document.getElementById('passwordScreens');
        const messageScreensContainer = document.getElementById('messageScreens');

        friends.forEach((friend, index) => {
            // ≈ûifre ekranƒ±
            const passwordScreen = document.createElement('div');
            passwordScreen.id = `password-${index}`;
            passwordScreen.className = 'screen password-screen';
            passwordScreen.innerHTML = `
                <div class="header" style="background-color: ${friend.color}">
                    ${friend.name}'in Kutusu
                </div>
                <div class="hint-section">
                    <h3>ƒ∞pucu:</h3>
                    <p>${friend.hint}</p>
                </div>
                <p class="warning">(T√ºrk√ße karakter kullanmayƒ±n!)</p>
                ${friend.hasEmoji ? '<div class="emoji-container"><img src="resources/images/emoji.png" alt="emoji"></div>' : ''}
                <input type="text" id="passwordInput-${index}" maxlength="31" autocomplete="off">
                <button class="back-button" onclick="backToFriendSelection()">Geri</button>
            `;
            passwordScreensContainer.appendChild(passwordScreen);

            // ≈ûifre input event
            const passwordInput = passwordScreen.querySelector('input');
            passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    if (passwordInput.value.toLowerCase() === friend.password.toLowerCase()) {
                        showScreen(`message-${index}`);
                        passwordInput.value = '';
                        playMusic(index);
                        createConfetti(friend.color);
                    }
                }
            });

            // ≈ûifre uzunluƒüuna g√∂re font boyutu ayarla
            passwordInput.addEventListener('input', () => {
                if (passwordInput.value.length > 15) {
                    passwordInput.classList.add('small-text');
                } else {
                    passwordInput.classList.remove('small-text');
                }
            });

            // Mesaj ekranƒ±
            const messageScreen = document.createElement('div');
            messageScreen.id = `message-${index}`;
            messageScreen.className = 'screen message-screen';
            messageScreen.innerHTML = `
                <div class="header" style="background-color: ${friend.color}">
                    ${friend.name}
                </div>
                <div class="photo-container">
                    <img src="${friend.photo}" alt="${friend.name}">
                </div>
                <div class="message-text">
                    ${friend.message}
                </div>
                <button class="back-button" onclick="backFromMessage()">Geri D√∂n</button>
            `;
            messageScreensContainer.appendChild(messageScreen);
        });

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
        }

        function backToFriendSelection() {
            showScreen('friendSelection');
            currentFriend = null;
        }

        function backFromMessage() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }
            showScreen('friendSelection');
            currentFriend = null;
        }

        function playMusic(friendIndex) {
            if (currentAudio) {
                currentAudio.pause();
            }
            
            const friend = friends[friendIndex];
            const audio = new Audio(friend.music);
            
            audio.addEventListener('canplaythrough', () => {
                audio.currentTime = friend.startTime;
                audio.play().catch(err => {
                    console.error('Playback error:', err);
                });
            }, { once: true });

            currentAudio = audio;
        }

        function createConfetti(color) {
            const app = document.getElementById('app');
            for (let i = 0; i < 40; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.textContent = '<3';
                confetti.style.color = color;
                confetti.style.left = '225px';
                confetti.style.top = '400px';
                
                const velocityX = (Math.random() * 10 - 5);
                const velocityY = (Math.random() * 14 - 12);
                let posX = 225;
                let posY = 400;
                let opacity = 1;

                app.appendChild(confetti);

                const animate = () => {
                    posX += velocityX;
                    posY += velocityY;
                    opacity -= 0.015;

                    confetti.style.left = posX + 'px';
                    confetti.style.top = posY + 'px';
                    confetti.style.opacity = opacity;

                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        confetti.remove();
                    }
                };

                animate();
            }
        }

        // iOS i√ßin ses aktivasyonu
        document.addEventListener('touchstart', function enableAudio() {
            const silentAudio = new Audio();
            silentAudio.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAADhAC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7//////////////////////////////////////////////////////////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAAAAAAAAAAAA4T/1mQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7kGQAD/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5BkAA/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV';
            silentAudio.play().then(() => {
                silentAudio.pause();
            }).catch(() => {});
            document.removeEventListener('touchstart', enableAudio);
        }, { once: true });
    </script>
</body>
</html>
